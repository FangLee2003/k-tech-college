<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-100 p-4">
    <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg">
        <h1 class="text-3xl font-bold text-center mb-8">User Registration</h1>
        
        <form id="form" novalidate>
            <!-- Full Name -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Full Name <span class="text-red-500">*</span></label>
                <input type="text" id="fullName" class="w-full p-3 border-2 rounded">
                <div id="fullNameError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Email -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Email <span class="text-red-500">*</span></label>
                <input type="email" id="email" class="w-full p-3 border-2 rounded">
                <div id="emailError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Password -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Password <span class="text-red-500">*</span></label>
                <input type="password" id="password" class="w-full p-3 border-2 rounded">
                <div id="passwordError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Confirm Password -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Confirm Password <span class="text-red-500">*</span></label>
                <input type="password" id="confirmPassword" class="w-full p-3 border-2 rounded">
                <div id="confirmPasswordError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Phone -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Phone Number <span class="text-red-500">*</span></label>
                <input type="tel" id="phone" class="w-full p-3 border-2 rounded">
                <div id="phoneError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Gender -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Gender <span class="text-red-500">*</span></label>
                <div class="flex gap-6">
                    <label class="flex items-center">
                        <input type="radio" name="gender" value="male" class="mr-2">Male
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="gender" value="female" class="mr-2">Female
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="gender" value="other" class="mr-2">Other
                    </label>
                </div>
                <div id="genderError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Date of Birth -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Date of Birth <span class="text-red-500">*</span></label>
                <input type="date" id="dob" class="w-full p-3 border-2 rounded">
                <div id="dobError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Country -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Country <span class="text-red-500">*</span></label>
                <select id="country" class="w-full p-3 border-2 rounded">
                    <option value="">Select Country</option>
                    <option value="vietnam">Vietnam</option>
                    <option value="usa">United States</option>
                    <option value="uk">United Kingdom</option>
                    <option value="canada">Canada</option>
                    <option value="australia">Australia</option>
                    <option value="japan">Japan</option>
                </select>
                <div id="countryError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Hobbies -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Hobbies <span class="text-red-500">*</span></label>
                <div class="grid grid-cols-2 gap-4">
                    <label class="flex items-center">
                        <input type="checkbox" name="hobbies" value="reading" class="mr-2">Reading
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="hobbies" value="sports" class="mr-2">Sports
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="hobbies" value="music" class="mr-2">Music
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="hobbies" value="travel" class="mr-2">Travel
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="hobbies" value="gaming" class="mr-2">Gaming
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" name="hobbies" value="cooking" class="mr-2">Cooking
                    </label>
                </div>
                <div id="hobbiesError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Profile Picture -->
            <div class="mb-4">
                <label class="block font-semibold mb-2">Profile Picture</label>
                <input type="file" id="profile" accept=".jpg,.jpeg,.png" class="w-full p-3 border-2 rounded">
                <div id="profileError" class="text-red-500 text-sm mt-1 hidden"></div>
            </div>

            <!-- Bio -->
            <div class="mb-6">
                <label class="block font-semibold mb-2">Bio / About You</label>
                <textarea id="bio" maxlength="300" rows="4" class="w-full p-3 border-2 rounded resize-none"></textarea>
                <div id="bioCount" class="text-sm text-gray-500 text-right mt-1">300 characters remaining</div>
            </div>

            <button type="submit" class="w-full bg-teal-500 text-white p-4 rounded-lg text-lg font-semibold hover:bg-teal-600">
                Register
            </button>
        </form>

        <div id="success" class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mt-4">
            Registration successful! Welcome aboard!
        </div>
    </div>

    <script>
        const form = document.getElementById('form');
        const bio = document.getElementById('bio');
        const bioCount = document.getElementById('bioCount');

        bio.addEventListener('input', function() {
            const remaining = 300 - this.value.length;
            bioCount.textContent = remaining + ' characters remaining';
            bioCount.className = remaining < 50 ? 'text-sm text-red-500 text-right mt-1' : 'text-sm text-gray-500 text-right mt-1';
        });

        function showError(input, errorId, message) {
            input.className = input.className.replace('border-2', 'border-2 border-red-500');
            const error = document.getElementById(errorId);
            error.textContent = message;
            error.className = error.className.replace('hidden', '');
            return false;
        }

        function hideError(input, errorId) {
            input.className = input.className.replace('border-red-500', '');
            document.getElementById(errorId).className = document.getElementById(errorId).className + ' hidden';
            return true;
        }

        function validateFullName() {
            const input = document.getElementById('fullName');
            if (input.value.trim().length < 3) {
                return showError(input, 'fullNameError', 'Full name must be at least 3 characters');
            }
            return hideError(input, 'fullNameError');
        }

        function validateEmail() {
            const input = document.getElementById('email');
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!regex.test(input.value)) {
                return showError(input, 'emailError', 'Please enter a valid email address');
            }
            return hideError(input, 'emailError');
        }

        function validatePassword() {
            const input = document.getElementById('password');
            const regex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
            if (input.value.length < 8) {
                return showError(input, 'passwordError', 'Password must be at least 8 characters');
            }
            if (!regex.test(input.value)) {
                return showError(input, 'passwordError', 'Password must contain both letters and numbers');
            }
            return hideError(input, 'passwordError');
        }

        function validateConfirmPassword() {
            const password = document.getElementById('password');
            const confirm = document.getElementById('confirmPassword');
            if (password.value !== confirm.value) {
                return showError(confirm, 'confirmPasswordError', 'Passwords do not match');
            }
            return hideError(confirm, 'confirmPasswordError');
        }

        function validatePhone() {
            const input = document.getElementById('phone');
            const regex = /^\d{10,}$/;
            if (!regex.test(input.value)) {
                return showError(input, 'phoneError', 'Phone must contain only digits and be at least 10 digits');
            }
            return hideError(input, 'phoneError');
        }

        function validateGender() {
            const radios = document.querySelectorAll('input[name="gender"]');
            const checked = Array.from(radios).some(r => r.checked);
            const error = document.getElementById('genderError');
            if (!checked) {
                error.textContent = 'Please select a gender';
                error.className = error.className.replace('hidden', '');
                return false;
            }
            error.className = error.className + ' hidden';
            return true;
        }

        function validateDOB() {
            const input = document.getElementById('dob');
            if (!input.value) {
                return showError(input, 'dobError', 'Date of birth is required');
            }
            const birth = new Date(input.value);
            const today = new Date();
            const age = today.getFullYear() - birth.getFullYear();
            if (age < 18 || (age === 18 && today < new Date(birth.setFullYear(birth.getFullYear() + 18)))) {
                return showError(input, 'dobError', 'You must be at least 18 years old');
            }
            return hideError(input, 'dobError');
        }

        function validateCountry() {
            const input = document.getElementById('country');
            if (!input.value) {
                return showError(input, 'countryError', 'Please select a country');
            }
            return hideError(input, 'countryError');
        }

        function validateHobbies() {
            const checkboxes = document.querySelectorAll('input[name="hobbies"]');
            const checked = Array.from(checkboxes).some(c => c.checked);
            const error = document.getElementById('hobbiesError');
            if (!checked) {
                error.textContent = 'Please select at least one hobby';
                error.className = error.className.replace('hidden', '');
                return false;
            }
            error.className = error.className + ' hidden';
            return true;
        }

        function validateProfile() {
            const input = document.getElementById('profile');
            if (input.files.length > 0) {
                const file = input.files[0];
                const allowed = ['image/jpeg', 'image/jpg', 'image/png'];
                if (!allowed.includes(file.type)) {
                    return showError(input, 'profileError', 'Please upload a valid image file (.jpg, .jpeg, .png)');
                }
            }
            return hideError(input, 'profileError');
        }

        document.getElementById('fullName').addEventListener('blur', validateFullName);
        document.getElementById('email').addEventListener('blur', validateEmail);
        document.getElementById('password').addEventListener('blur', validatePassword);
        document.getElementById('confirmPassword').addEventListener('blur', validateConfirmPassword);
        document.getElementById('phone').addEventListener('blur', validatePhone);
        document.getElementById('dob').addEventListener('blur', validateDOB);
        document.getElementById('country').addEventListener('blur', validateCountry);
        document.getElementById('profile').addEventListener('change', validateProfile);

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const validations = [
                validateFullName(),
                validateEmail(),
                validatePassword(),
                validateConfirmPassword(),
                validatePhone(),
                validateGender(),
                validateDOB(),
                validateCountry(),
                validateHobbies(),
                validateProfile()
            ];
            
            if (validations.every(v => v)) {
                document.getElementById('success').className = document.getElementById('success').className.replace('hidden', '');
                form.style.display = 'none';
                
                setTimeout(() => {
                    form.reset();
                    document.getElementById('success').className = document.getElementById('success').className + ' hidden';
                    form.style.display = 'block';
                    bioCount.textContent = '300 characters remaining';
                    bioCount.className = 'text-sm text-gray-500 text-right mt-1';
                }, 3000);
            }
        });
    </script>
</body>
</html>